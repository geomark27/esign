import{j as e,L as S,$ as r}from"./app-DXl8iYFA.js";import{B as c}from"./badge-fZJujToP.js";import{c as f,B as i}from"./app-logo-icon-CCDeanD4.js";import{u as I,C as l}from"./use-breadcrumbs-DLBeVAXN.js";import{A as E,S as j,U as n,a as $}from"./app-layout-Bmd4AfJA.js";import{S as g}from"./square-pen-wY8kXSkY.js";import{A as L}from"./arrow-left-CdcNf2ym.js";import{C as R}from"./calendar-DWapgahq.js";import{C as B}from"./clock-C8jwJZPZ.js";import{K as d}from"./key-B2rz7vnt.js";import{T as P,A as U,Z as M}from"./zap-D3kAbXKv.js";import{C as z}from"./circle-check-big-BVJAPuW_.js";import{C as O}from"./circle-alert-CykOxvKb.js";import{E as T}from"./eye-BobLg2-x.js";import{C as N}from"./chart-column-B0Qqh8XK.js";import{I as q}from"./info-p5107-QQ.js";import"./index-BsE4fqny.js";import"./index-BGF8R9_i.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],V=f("Target",D);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]],K=f("UserCheck",F);function xe({role:a,stats:s}){const{adminBreadcrumbs:b}=I(),v=b.roles.stats(),u=Object.values(s.permissions_by_module).flat().length,y=u>0?(s.total_permissions/u*100).toFixed(1):"0",x=Object.keys(s.permissions_by_module).length,w=x>0?(s.total_permissions/x).toFixed(1):"0",C=t=>{switch(t.toLowerCase()){case"admin":return"bg-red-500";case"user":return"bg-blue-500";case"editor":return"bg-green-500";case"moderator":return"bg-purple-500";default:return"bg-gray-500"}},_=t=>{switch(t.toLowerCase()){case"users":return{icon:n,color:"bg-blue-500",textColor:"text-blue-700"};case"roles":return{icon:j,color:"bg-red-500",textColor:"text-red-700"};case"dashboard":return{icon:N,color:"bg-green-500",textColor:"text-green-700"};case"settings":return{icon:$,color:"bg-purple-500",textColor:"text-purple-700"};default:return{icon:d,color:"bg-gray-500",textColor:"text-gray-700"}}},A=C(a.name),p=["admin","user"].includes(a.name.toLowerCase());return e.jsxs(E,{breadcrumbs:v,children:[e.jsx(S,{title:`Estadísticas: ${a.display_name}`}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-6 rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold tracking-tight",children:["Estadísticas: ",a.display_name]}),e.jsx("p",{className:"text-muted-foreground",children:"Análisis detallado del uso y configuración del rol"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(r,{href:`/admin/roles/${a.id}/edit`,children:e.jsxs(i,{variant:"outline",size:"sm",className:"flex items-center space-x-2",children:[e.jsx(g,{className:"h-4 w-4"}),e.jsx("span",{children:"Editar Rol"})]})}),e.jsx(r,{href:"/admin/roles",children:e.jsxs(i,{variant:"outline",className:"flex items-center space-x-2",children:[e.jsx(L,{className:"h-4 w-4"}),e.jsx("span",{children:"Volver a Roles"})]})})]})]}),e.jsx(l,{className:"p-6 bg-gradient-to-r from-blue-50 to-purple-50 border-l-4 border-l-blue-500",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:`${A} p-4 rounded-lg text-white`,children:e.jsx(j,{className:"h-8 w-8"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:a.display_name}),e.jsx(c,{variant:"outline",className:"text-xs",children:a.name}),p&&e.jsx(c,{variant:"secondary",className:"text-xs",children:"Rol del Sistema"})]}),e.jsx("p",{className:"text-gray-600 mb-1",children:a.description||"Sin descripción disponible"}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:[e.jsxs("span",{className:"flex items-center space-x-1",children:[e.jsx(R,{className:"h-4 w-4"}),e.jsxs("span",{children:["Creado: ",new Date(a.created_at).toLocaleDateString("es-ES")]})]}),e.jsxs("span",{className:"flex items-center space-x-1",children:[e.jsx(B,{className:"h-4 w-4"}),e.jsxs("span",{children:["Actualizado: ",new Date(a.updated_at).toLocaleDateString("es-ES")]})]})]})]})]})})}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[e.jsxs(l,{className:"p-6 text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center mx-auto mb-3",children:e.jsx(n,{className:"h-6 w-6 text-blue-600"})}),e.jsx("div",{className:"text-2xl font-bold text-blue-800 mb-1",children:s.total_users}),e.jsx("div",{className:"text-sm text-gray-600",children:"Usuarios con este rol"})]}),e.jsxs(l,{className:"p-6 text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center mx-auto mb-3",children:e.jsx(d,{className:"h-6 w-6 text-green-600"})}),e.jsx("div",{className:"text-2xl font-bold text-green-800 mb-1",children:s.total_permissions}),e.jsx("div",{className:"text-sm text-gray-600",children:"Permisos asignados"})]}),e.jsxs(l,{className:"p-6 text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center mx-auto mb-3",children:e.jsx(P,{className:"h-6 w-6 text-purple-600"})}),e.jsxs("div",{className:"text-2xl font-bold text-purple-800 mb-1",children:[y,"%"]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Cobertura del sistema"})]}),e.jsxs(l,{className:"p-6 text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-amber-100 rounded-lg flex items-center justify-center mx-auto mb-3",children:e.jsx(V,{className:"h-6 w-6 text-amber-600"})}),e.jsx("div",{className:"text-2xl font-bold text-amber-800 mb-1",children:x}),e.jsx("div",{className:"text-sm text-gray-600",children:"Módulos con acceso"})]})]}),e.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[e.jsxs(l,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-lg font-semibold flex items-center space-x-2",children:[e.jsx(n,{className:"h-5 w-5 text-blue-600"}),e.jsx("span",{children:"Usuarios con este rol"})]}),e.jsxs(c,{variant:"outline",children:[s.total_users," total"]})]}),s.users_list.length>0?e.jsxs("div",{className:"space-y-3",children:[s.users_list.map(t=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center text-white text-sm font-medium",children:t.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-sm",children:t.name}),e.jsx("div",{className:"text-xs text-gray-500",children:t.email})]})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[t.email_verified_at?e.jsx(z,{className:"h-4 w-4 text-green-500"}):e.jsx(O,{className:"h-4 w-4 text-red-500"}),e.jsx(r,{href:`/admin/users/${t.id}/edit`,children:e.jsx(i,{variant:"outline",size:"sm",children:e.jsx(T,{className:"h-3 w-3"})})})]})]},t.id)),s.total_users>5&&e.jsx("div",{className:"text-center py-2",children:e.jsx(r,{href:"/admin/users",children:e.jsxs(i,{variant:"outline",size:"sm",children:["Ver todos los ",s.total_users," usuarios"]})})})]}):e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(K,{className:"h-12 w-12 mx-auto mb-3 text-gray-300"}),e.jsx("p",{children:"No hay usuarios con este rol"})]})]}),e.jsxs(l,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-lg font-semibold flex items-center space-x-2",children:[e.jsx(d,{className:"h-5 w-5 text-green-600"}),e.jsx("span",{children:"Permisos por Módulo"})]}),e.jsxs(c,{variant:"outline",children:[s.total_permissions," permisos"]})]}),Object.keys(s.permissions_by_module).length>0?e.jsx("div",{className:"space-y-4",children:Object.entries(s.permissions_by_module).map(([t,o])=>{const m=_(t),k=m.icon;return e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`${m.color} p-2 rounded-lg text-white`,children:e.jsx(k,{className:"h-4 w-4"})}),e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium capitalize",children:["Módulo ",t]}),e.jsxs("p",{className:"text-xs text-gray-500",children:[o.length," permisos"]})]})]}),e.jsx("div",{className:`text-right ${m.textColor}`,children:e.jsx("div",{className:"text-lg font-bold",children:o.length})})]}),e.jsx("div",{className:"grid gap-2",children:o.map(h=>e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-700",children:h.display_name}),e.jsx("span",{className:"text-xs text-gray-500 font-mono",children:h.name})]},h.id))})]},t)})}):e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(d,{className:"h-12 w-12 mx-auto mb-3 text-gray-300"}),e.jsx("p",{children:"No hay permisos asignados a este rol"})]})]})]}),e.jsxs(l,{className:"p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center space-x-2",children:[e.jsx(U,{className:"h-5 w-5 text-purple-600"}),e.jsx("span",{children:"Análisis Avanzado"})]}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-3",children:[e.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-800 mb-1",children:w}),e.jsx("div",{className:"text-sm text-blue-600 font-medium",children:"Permisos promedio por módulo"}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Indica la granularidad del rol"})]}),e.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-green-800 mb-1",children:p?"Alta":"Media"}),e.jsx("div",{className:"text-sm text-green-600 font-medium",children:"Criticidad del rol"}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Impacto en el sistema"})]}),e.jsxs("div",{className:"text-center p-4 bg-purple-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-800 mb-1",children:s.total_users>0?"Activo":"Inactivo"}),e.jsx("div",{className:"text-sm text-purple-600 font-medium",children:"Estado de uso"}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Basado en usuarios asignados"})]})]})]}),e.jsxs(l,{className:"p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center space-x-2",children:[e.jsx(M,{className:"h-5 w-5 text-amber-600"}),e.jsx("span",{children:"Acciones Rápidas"})]}),e.jsxs("div",{className:"grid gap-3 md:grid-cols-2 lg:grid-cols-4",children:[e.jsx(r,{href:`/admin/roles/${a.id}/edit`,children:e.jsxs(i,{variant:"outline",className:"w-full justify-start",children:[e.jsx(g,{className:"h-4 w-4 mr-2"}),"Editar Información"]})}),e.jsx(r,{href:`/admin/roles/${a.id}/permissions`,children:e.jsxs(i,{variant:"outline",className:"w-full justify-start",children:[e.jsx(j,{className:"h-4 w-4 mr-2"}),"Gestionar Permisos"]})}),e.jsx(r,{href:"/admin/users",children:e.jsxs(i,{variant:"outline",className:"w-full justify-start",children:[e.jsx(n,{className:"h-4 w-4 mr-2"}),"Ver Todos los Usuarios"]})}),e.jsx(r,{href:"/admin/roles",children:e.jsxs(i,{variant:"outline",className:"w-full justify-start",children:[e.jsx(N,{className:"h-4 w-4 mr-2"}),"Comparar con Otros Roles"]})})]})]}),e.jsx(l,{className:"p-4 bg-blue-50 border-blue-200",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(q,{className:"w-5 h-5 text-blue-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-blue-900",children:"Interpretación de las estadísticas"}),e.jsxs("ul",{className:"text-sm text-blue-700 mt-2 space-y-1",children:[e.jsxs("li",{children:["• ",e.jsx("strong",{children:"Cobertura del sistema:"})," Porcentaje de permisos totales que tiene este rol"]}),e.jsxs("li",{children:["• ",e.jsx("strong",{children:"Módulos con acceso:"})," Cantidad de áreas del sistema a las que puede acceder"]}),e.jsxs("li",{children:["• ",e.jsx("strong",{children:"Criticidad:"})," Roles del sistema (admin/user) tienen alta criticidad"]}),e.jsxs("li",{children:["• ",e.jsx("strong",{children:"Estado de uso:"})," Activo si tiene usuarios asignados, Inactivo si no"]})]})]})]})})]})]})}export{xe as default};
