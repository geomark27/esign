import{r as h,m as T,j as e,L as z,S as u}from"./app-NQZYwZxE.js";import{A as $,C as G}from"./app-layout-DuMOQUr6.js";import{B as H}from"./badge-CysAJUxd.js";import{c as j,B as t}from"./app-logo-icon-D_Rp5eSv.js";import{I as m}from"./input-DVTDn1Ue.js";import{C as w}from"./card-DUep4rP4.js";import{D as R,a as V,b as Z,c as q,e as K,f as J}from"./dialog-CHCQddYa.js";import{L as x}from"./label-DP57cNBy.js";import{T as Q}from"./textarea-CFfsQSYw.js";import{S as U,a as W,b as X,c as Y,d as p}from"./select-CTrUruAo.js";import{T as ee}from"./index-DFbpA4fk.js";import{u as se}from"./use-breadcrumbs-DvJ2nCC4.js";import{S as re}from"./search-D5tqskJn.js";import{C as ae}from"./chevron-left-BOWI_oDY.js";import"./index-B7uAbRVs.js";import"./index-oQJ4WyGj.js";import"./check-BUYNMoAp.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const te=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],ie=j("CirclePlus",te);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ce=[["path",{d:"m18 5-2.414-2.414A2 2 0 0 0 14.172 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2",key:"142zxg"}],["path",{d:"M21.378 12.626a1 1 0 0 0-3.004-3.004l-4.01 4.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"2t3380"}],["path",{d:"M8 18h1",key:"13wk12"}]],le=j("FilePenLine",ce);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ne=[["path",{d:"M18.36 6.64A9 9 0 0 1 20.77 15",key:"dxknvb"}],["path",{d:"M6.16 6.16a9 9 0 1 0 12.68 12.68",key:"1x7qb5"}],["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],oe=j("PowerOff",ne);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const de=[["path",{d:"M12 2v10",key:"mnfbl"}],["path",{d:"M18.4 6.6a9 9 0 1 1-12.77.04",key:"obofu9"}]],me=j("Power",de);function Me(P){const{adminBreadcrumbs:M}=se(),F=M.signatures.index(),{signatures:r,filters:i={},flash:c={}}=P,[D,o]=h.useState(!1),[l,g]=h.useState(null),[v,f]=h.useState(typeof(i==null?void 0:i.sort)=="string"?i.sort:"created_at_desc"),[N,y]=h.useState(typeof(i==null?void 0:i.search)=="string"?i.search:""),{data:d,setData:n,post:A,put:L,processing:b,errors:a,reset:_}=T({period:"",display_name:"",cost:"",price:"",description:""}),C=()=>{u.get(route("admin.signatures.index"),{search:N||void 0,sort:v},{preserveState:!0,replace:!0})},O=()=>{y(""),f("created_at_desc"),u.get(route("admin.signatures.index"))},S=s=>{u.get(s,{preserveState:!0,preserveScroll:!0})},B=()=>{g(null),_(),o(!0)},E=s=>{g(s),n({period:s.period,display_name:s.display_name,cost:s.cost,price:s.price,description:s.description||""}),o(!0)},I=s=>{s.preventDefault();const k=()=>{o(!1),g(null),_()};l?L(route("admin.signatures.update",l.id),{onSuccess:k,preserveScroll:!0}):A(route("admin.signatures.store"),{onSuccess:k,preserveScroll:!0})};return e.jsxs($,{breadcrumbs:F,children:[e.jsx(z,{title:"Gestión de Planes"}),e.jsx(ee,{position:"top-center",richColors:!0}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-6 rounded-xl p-4 sm:p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Gestión de firmas"}),e.jsx("p",{className:"text-muted-foreground",children:"Administra los planes y precios del sistema."})]}),e.jsxs(t,{onClick:B,children:[e.jsx(ie,{className:"mr-2 h-4 w-4"}),"Crear firma"]})]}),(c==null?void 0:c.success)&&e.jsx("div",{className:"bg-green-50 border border-green-200 text-green-800 px-4 py-3 rounded",children:c.success}),(c==null?void 0:c.error)&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-800 px-4 py-3 rounded",children:c.error}),e.jsx(w,{className:"p-4",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-end",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Buscar firmas"}),e.jsxs("div",{className:"relative",children:[e.jsx(re,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(m,{id:"search",type:"text",placeholder:"Buscar por nombre o código...",value:N,onChange:s=>y(s.target.value),className:"pl-10",onKeyPress:s=>s.key==="Enter"&&C()})]})]}),e.jsxs("div",{className:"min-w-[200px]",children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Ordenar por"}),e.jsxs(U,{value:v,onValueChange:s=>f(s),children:[e.jsx(W,{children:e.jsx(X,{placeholder:"Ordenar por..."})}),e.jsxs(Y,{children:[e.jsx(p,{value:"created_at_desc",children:"Más recientes"}),e.jsx(p,{value:"name_asc",children:"Nombre (A-Z)"}),e.jsx(p,{value:"name_desc",children:"Nombre (Z-A)"}),e.jsx(p,{value:"price_desc",children:"Precio (Mayor a menor)"}),e.jsx(p,{value:"price_asc",children:"Precio (Menor a mayor)"})]})]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(t,{onClick:C,children:"Filtrar"}),e.jsx(t,{variant:"outline",onClick:O,children:"Limpiar"})]})]})}),e.jsxs(w,{children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"border-b",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left p-4 font-medium",children:"Nombre"}),e.jsx("th",{className:"text-left p-4 font-medium",children:"Código/Periodo"}),e.jsx("th",{className:"text-right p-4 font-medium",children:"Costo"}),e.jsx("th",{className:"text-right p-4 font-medium",children:"Precio"}),e.jsx("th",{className:"text-left p-4 font-medium",children:"Estado"}),e.jsx("th",{className:"text-right p-4 font-medium",children:"Acciones"})]})}),e.jsx("tbody",{children:r.data.length>0?r.data.map(s=>e.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[e.jsx("td",{className:"p-4 font-medium",children:s.display_name}),e.jsx("td",{className:"p-4",children:s.period}),e.jsxs("td",{className:"p-4 text-right",children:["$",parseFloat(s.cost).toFixed(2)]}),e.jsxs("td",{className:"p-4 text-right",children:["$",parseFloat(s.price).toFixed(2)]}),e.jsx("td",{className:"p-4",children:e.jsx(H,{variant:s.is_active?"default":"destructive",children:s.is_active?"Activo":"Inactivo"})}),e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[e.jsx(t,{variant:"outline",size:"sm",onClick:()=>E(s),children:e.jsx(le,{className:"h-4 w-4"})}),e.jsx(t,{variant:s.is_active?"outline":"default",size:"sm",onClick:()=>{u.put(route("admin.signatures.change.status",s.id),{},{preserveScroll:!0})},className:s.is_active?"text-yellow-600 hover:text-yellow-700 hover:bg-yellow-50":"text-green-600 hover:text-green-700 hover:bg-green-50",children:s.is_active?e.jsxs("span",{className:"flex items-center",children:[e.jsx(oe,{className:"h-4 w-4 mr-1"}),"Desactivar"]}):e.jsxs("span",{className:"flex items-center",children:[e.jsx(me,{className:"h-4 w-4 mr-1"}),"Activar"]})})]})})]},s.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"p-8 text-center text-gray-500",children:"No se encontraron planes."})})})]})}),r.data.length>0&&e.jsxs("div",{className:"flex items-center justify-between p-4 border-t",children:[e.jsxs("div",{className:"text-sm text-gray-500",children:["Mostrando ",r.from," a ",r.to," de ",r.total," planes"]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(t,{variant:"outline",size:"sm",onClick:()=>S(r.prev_page_url),disabled:!r.prev_page_url,children:[e.jsx(ae,{className:"h-4 w-4"})," Anterior"]}),e.jsxs(t,{variant:"outline",size:"sm",onClick:()=>S(r.next_page_url),disabled:!r.next_page_url,children:["Siguiente ",e.jsx(G,{className:"h-4 w-4"})]})]})]})]})]}),e.jsx(R,{open:D,onOpenChange:o,children:e.jsx(V,{className:"sm:max-w-lg",children:e.jsxs("form",{onSubmit:I,children:[e.jsxs(Z,{children:[e.jsx(q,{children:l?"Editar Signature":"Crear Nuevo Signature"}),e.jsx(K,{children:l?"Modifica los detalles del plan.":"Completa el formulario para añadir un nuevo plan."})]}),e.jsxs("div",{className:"grid gap-4 py-6",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(x,{htmlFor:"display_name",children:"Nombre"}),e.jsx(m,{id:"display_name",value:d.display_name,onChange:s=>n("display_name",s.target.value)}),a.display_name&&e.jsx("p",{className:"text-sm text-red-500",children:a.display_name})]}),e.jsxs("div",{className:"space-y-1",hidden:!!l,children:[e.jsx(x,{htmlFor:"period",children:"Código/Periodo"}),e.jsx(m,{id:"period",value:d.period,onChange:s=>n("period",s.target.value),readOnly:!!l}),a.period&&e.jsx("p",{className:"text-sm text-red-500",children:a.period})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(x,{htmlFor:"cost",children:"Costo"}),e.jsx(m,{id:"cost",type:"number",step:"0.01",value:d.cost,onChange:s=>n("cost",s.target.value)}),a.cost&&e.jsx("p",{className:"text-sm text-red-500",children:a.cost})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(x,{htmlFor:"price",children:"Precio"}),e.jsx(m,{id:"price",type:"number",step:"0.01",value:d.price,onChange:s=>n("price",s.target.value)}),a.price&&e.jsx("p",{className:"text-sm text-red-500",children:a.price})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(x,{htmlFor:"description",children:"Descripción (Opcional)"}),e.jsx(Q,{id:"description",value:d.description,onChange:s=>n("description",s.target.value),rows:4}),a.description&&e.jsx("p",{className:"text-sm text-red-500",children:a.description})]})]}),e.jsxs(J,{children:[e.jsx(t,{type:"button",variant:"outline",onClick:()=>o(!1),children:"Cancelar"}),e.jsx(t,{type:"submit",disabled:b,children:b?"Guardando...":"Guardar Cambios"})]})]})})})]})}export{Me as default};
