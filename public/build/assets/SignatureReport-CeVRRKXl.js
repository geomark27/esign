import{r as n,j as e,L as w,S as m}from"./app-CecMAAZV.js";import{A as F,C as k}from"./app-layout-BMASLV2d.js";import{B as l}from"./app-logo-icon-DfF5Rigy.js";import{I as x}from"./input-WGaoF00a.js";import{C as v}from"./card-CYj-GJA0.js";import{S as D,a as E,b as L,c as T,d as N}from"./select-ChS7d5no.js";import{S as A}from"./search-B7w8OsoG.js";import{F as R}from"./file-down-CBrHYvfd.js";import{C as z}from"./chevron-left-FFMjP1XX.js";import"./index-C-AQJaCY.js";import"./index-DV3bmtHZ.js";import"./check-meL_zU52.js";function Q({auth:B,certifications:s,filters:o,statusOptions:h}){const[d,u]=n.useState(o.search||""),[a,p]=n.useState(o.status||"all"),[c,j]=n.useState(o.date_from||""),[i,g]=n.useState(o.date_to||""),y=t=>{t.preventDefault(),m.get(route("admin.reports.signatures"),{search:d||void 0,status:a==="all"?void 0:a,date_from:c||void 0,date_to:i||void 0},{preserveState:!0,replace:!0})},S=()=>{u(""),p("all"),j(""),g(""),m.get(route("admin.reports.signatures"))},f=t=>{t&&m.get(t,{preserveState:!0,preserveScroll:!0})},C=t=>({approved:"bg-green-100 text-green-800",completed:"bg-blue-100 text-blue-800",rejected:"bg-red-100 text-red-800",in_review:"bg-yellow-100 text-yellow-800",pending:"bg-gray-100 text-gray-800"})[t]||"bg-gray-100 text-gray-800",_=()=>{const t=new URLSearchParams({search:d||"",status:a==="all"?"":a||"",date_from:c||"",date_to:i||""}).toString();window.location.href=route("admin.reports.signatures.export")+"?"+t};return e.jsxs(F,{children:[e.jsx(w,{title:"Reporte de Certificaciones"}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-6 rounded-xl p-4 sm:p-6",children:[e.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Historial de certificados"}),e.jsx(v,{className:"p-4",children:e.jsxs("form",{onSubmit:y,className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 items-end",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Buscar"}),e.jsx(x,{placeholder:"Nro. certificado, estado o firma...",value:d,onChange:t=>u(t.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Estado"}),e.jsxs(D,{value:a,onValueChange:p,children:[e.jsx(E,{children:e.jsx(L,{placeholder:"Todos"})}),e.jsxs(T,{children:[e.jsx(N,{value:"all",children:"Todos"}),Object.entries(h).map(([t,r])=>e.jsx(N,{value:t,children:r},t))]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Desde"}),e.jsx(x,{type:"date",value:c,onChange:t=>j(t.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Hasta"}),e.jsx(x,{type:"date",value:i,onChange:t=>g(t.target.value)})]}),e.jsxs("div",{className:"lg:col-span-4 flex justify-end space-x-2 mt-2",children:[e.jsxs(l,{type:"submit",children:[e.jsx(A,{className:"h-4 w-4 mr-2"}),"Filtrar"]}),e.jsx(l,{variant:"outline",type:"button",onClick:S,children:"Limpiar"}),e.jsxs(l,{variant:"secondary",onClick:_,children:[e.jsx(R,{className:"h-4 w-4 mr-2"})," Exportar"]})]})]})}),e.jsxs(v,{children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"border-b",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-center p-4 font-medium",children:"Nro. Certificado"}),e.jsx("th",{className:"text-center p-4 font-medium",children:"Estado"}),e.jsx("th",{className:"text-center p-4 font-medium",children:"Firma"}),e.jsx("th",{className:"text-center p-4 font-medium",children:"Costo Firma"}),e.jsx("th",{className:"text-center p-4 font-medium",children:"Última Actualización"})]})}),e.jsx("tbody",{children:s.data.length>0?s.data.map(t=>{var r,b;return e.jsxs("tr",{className:"border-b hover:bg-gray-50/50",children:[e.jsx("td",{className:"p-4 font-medium text-center text-gray-900",children:t.certification_number||"N/A"}),e.jsx("td",{className:"p-4 text-center text-gray-700",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-semibold ${C(t.status)}`,children:h[t.status]||t.status})}),e.jsx("td",{className:"p-4 text-center text-gray-700",children:((r=t.period)==null?void 0:r.display_name)??"N/A"}),e.jsxs("td",{className:"p-4 text-center text-gray-700",children:["$",parseFloat(((b=t.period)==null?void 0:b.cost)??"0.00").toFixed(2)]}),e.jsx("td",{className:"p-4 text-center text-gray-700",children:new Date(t.updated_at).toLocaleDateString("es-EC",{year:"numeric",month:"long",day:"numeric"})})]},t.id)}):e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"p-8 text-center text-gray-500",children:"No se encontraron certificaciones que coincidan con los filtros."})})})]})}),s.data.length>0&&e.jsxs("div",{className:"flex items-center justify-between p-4 border-t",children:[e.jsxs("div",{className:"text-sm text-gray-500",children:["Mostrando ",s.from," a ",s.to," de ",s.total]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(l,{variant:"outline",size:"sm",onClick:()=>f(s.prev_page_url),disabled:!s.prev_page_url,children:[e.jsx(z,{className:"h-4 w-4 mr-1"})," Anterior"]}),e.jsxs(l,{variant:"outline",size:"sm",onClick:()=>f(s.next_page_url),disabled:!s.next_page_url,children:["Siguiente ",e.jsx(k,{className:"h-4 w-4 ml-1"})]})]})]})]})]})]})}export{Q as default};
