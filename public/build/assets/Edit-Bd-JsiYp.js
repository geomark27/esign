import{r as j,m as le,j as e,L as ce,$ as V,a as de}from"./app-NQZYwZxE.js";import{B as $}from"./badge-CysAJUxd.js";import{c as oe,B as m}from"./app-logo-icon-D_Rp5eSv.js";import{C as g,a as N,b,c as y,d as C}from"./card-DUep4rP4.js";import{C as me}from"./checkbox-DRICkLQh.js";import{I as d}from"./input-DVTDn1Ue.js";import{L as l}from"./label-DP57cNBy.js";import{S as R,a as S,b as A,c as E,d as w}from"./select-CTrUruAo.js";import{T as pe}from"./textarea-CFfsQSYw.js";import{u as xe}from"./use-breadcrumbs-DvJ2nCC4.js";import{A as he}from"./app-layout-DuMOQUr6.js";import{A as I}from"./arrow-left-DEahdW2n.js";import{E as ue}from"./eye-ADaAT4GR.js";import{C as je}from"./circle-alert-BMAxucee.js";import{C as p}from"./circle-check-big-D-l-1TDz.js";import{U as ge}from"./user-Bh_dh4aY.js";import{M as Ne}from"./map-pin-BdnUJoKD.js";import{B as fe}from"./building-B0XqtDta.js";import{F as ve}from"./file-text-BlbqMGnd.js";import{D as h}from"./download-DQhuThID.js";import{U as u}from"./upload-Dz0raqVM.js";import{S as be}from"./save-BZpSicuf.js";import"./index-B7uAbRVs.js";import"./index-oQJ4WyGj.js";import"./check-BUYNMoAp.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ye=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],Ce=oe("ArrowRight",ye);function Ke({certification:r,applicationTypes:U,periods:M,cities:G,provinces:L,statusOptions:Re,validationStatusOptions:H,canEdit:Se,hasCompanyDocs:J}){var O;const{userBreadcrumbs:W}=xe(),X=W.certifications.edit(r.certification_number),[o,B]=j.useState(1),[i,Y]=j.useState({}),[K,f]=j.useState(G||[]),[z,_]=j.useState(!1),F=4,{data:s,setData:c,put:Q,processing:k,errors:n,progress:T}=le({identificationNumber:r.identificationNumber||"",applicantName:r.applicantName||"",applicantLastName:r.applicantLastName||"",applicantSecondLastName:r.applicantSecondLastName||"",dateOfBirth:r.dateOfBirth?new Date(r.dateOfBirth).toISOString().split("T")[0]:"",fingerCode:r.fingerCode||"",emailAddress:r.emailAddress||"",cellphoneNumber:(O=r.cellphoneNumber)!=null&&O.startsWith("+593")?r.cellphoneNumber:"+593"+(r.cellphoneNumber||""),city:r.city||"",province:r.province||"",address:r.address||"",countryCode:r.countryCode||"ECU",companyRuc:r.companyRuc||"",positionCompany:r.positionCompany||"",companySocialReason:r.companySocialReason||"",appointmentExpirationDate:r.appointmentExpirationDate||"",documentType:r.documentType||"CI",applicationType:r.applicationType||"",referenceTransaction:r.referenceTransaction||"",period:r.period||"",identificationFront:null,identificationBack:null,identificationSelfie:null,pdfCompanyRuc:null,pdfRepresentativeAppointment:null,pdfAppointmentAcceptance:null,pdfCompanyConstitution:null,authorizationVideo:null,terms_accepted:!!r.terms_accepted}),D=s.applicationType==="LEGAL_REPRESENTATIVE";s.applicationType==="NATURAL_PERSON"&&s.companyRuc;const Z=r.is_over_65,ee=async a=>{if(!a){f([]);return}_(!0);try{const t=await de.get(`/user/api/cities-by-province/${a}`);t.data.success?f(t.data.cities):(console.error("Error al cargar ciudades:",t.data.message),f([]))}catch(t){console.error("Error al cargar ciudades:",t),f([])}finally{_(!1)}};j.useEffect(()=>{const a=L.find(t=>t.name===s.province);a?ee(a.id):f([])},[s.province]),j.useEffect(()=>{s.applicationType==="NATURAL_PERSON"&&!s.companyRuc&&c(a=>({...a,positionCompany:"",companySocialReason:"",appointmentExpirationDate:""}))},[s.applicationType,s.companyRuc]);const x=a=>t=>{var q;const v=(q=t.target.files)==null?void 0:q[0];v&&c(a,v)},P=a=>{const t={};switch(a){case 1:s.identificationNumber||(t.identificationNumber="Requerido"),s.applicantName||(t.applicantName="Requerido"),s.applicantLastName||(t.applicantLastName="Requerido"),s.fingerCode||(t.fingerCode="Requerido"),s.emailAddress||(t.emailAddress="Requerido"),s.cellphoneNumber||(t.cellphoneNumber="Requerido"),s.dateOfBirth||(t.dateOfBirth="Requerido");break;case 2:s.city||(t.city="Requerido"),s.province||(t.province="Requerido"),s.address||(t.address="Requerido");break;case 3:s.applicationType||(t.applicationType="Requerido"),s.period||(t.period="Requerido"),s.referenceTransaction||(t.referenceTransaction="Requerido"),D&&(s.companyRuc||(t.companyRuc="Requerido"),s.positionCompany||(t.positionCompany="Requerido"),s.companySocialReason||(t.companySocialReason="Requerido"),s.appointmentExpirationDate||(t.appointmentExpirationDate="Requerido"));break;case 4:s.terms_accepted||(t.terms_accepted="Debe aceptar los términos");break}return Y(t),Object.keys(t).length===0},ae=()=>{P(o)&&o<F&&B(o+1)},se=()=>{o>1&&B(o-1)},re=a=>{a.preventDefault()},te=()=>{P(o)&&Q(route("user.certifications.update",r.id))},ie=()=>`Hoy ${new Date().toLocaleDateString("es-ES",{day:"2-digit",month:"long",year:"numeric"}).toUpperCase()}, Yo ${s.applicantName} ${s.applicantLastName} ${s.applicantSecondLastName||""} con CI. ${s.identificationNumber} autorizo a FIRMASEGURA emitir mi firma electrónica, sabiendo que tiene la misma validez legal que la firma manuscrita y sea enviada a mi correo electrónico ${s.emailAddress}`,ne=(a,t)=>{const v={REGISTERED:"outline",VALIDATING:"secondary",REFUSED:"destructive",ERROR:"destructive",APPROVED:"default",GENERATED:"default",EXPIRED:"destructive"};return e.jsx($,{variant:v[a]||"outline",children:t[a]||a})};return e.jsxs(he,{breadcrumbs:X,children:[e.jsx(ce,{title:`Editar Certificación ${r.certification_number}`}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-6 rounded-xl p-6",children:[e.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(V,{href:route("user.certifications.show",r.id),children:e.jsxs(m,{variant:"outline",size:"sm",children:[e.jsx(I,{className:"h-4 w-4"}),"Volver"]})}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold tracking-tight",children:["Editar Certificación ",r.certification_number]}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx("span",{className:"text-muted-foreground",children:"Estado:"}),ne(r.validationStatus,H)]})]})]}),e.jsx(V,{href:route("user.certifications.show",r.id),children:e.jsxs(m,{variant:"outline",children:[e.jsx(ue,{className:"h-4 w-4"}),"Ver Detalles"]})})]}),r.validationStatus==="REFUSED"&&e.jsx(g,{className:"border-orange-200 bg-orange-50",children:e.jsx(N,{className:"pt-4",children:e.jsxs("div",{className:"flex items-center gap-2 text-orange-800",children:[e.jsx(je,{className:"h-4 w-4"}),e.jsx("span",{className:"text-sm font-medium",children:"Esta certificación fue rechazada. Corrige los errores y vuelve a enviar."})]})})}),e.jsx(g,{children:e.jsxs(N,{className:"pt-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:[1,2,3,4].map(a=>e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`flex h-8 w-8 items-center justify-center rounded-full text-sm font-medium ${a<=o?"bg-blue-600 text-white":"bg-gray-200 text-gray-500"}`,children:a<o?e.jsx(p,{className:"h-4 w-4"}):a}),a<4&&e.jsx("div",{className:`h-1 w-16 mx-2 ${a<o?"bg-blue-600":"bg-gray-200"}`})]},a))}),e.jsx("div",{className:"text-center",children:e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Paso ",o," de ",F]})})]})}),e.jsxs("form",{onSubmit:re,className:"space-y-6",children:[o===1&&e.jsxs(g,{children:[e.jsxs(b,{children:[e.jsxs(y,{className:"flex items-center gap-2",children:[e.jsx(ge,{className:"h-5 w-5"}),"Información Personal"]}),e.jsx(C,{children:"Datos básicos del solicitante"})]}),e.jsxs(N,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx(l,{htmlFor:"identificationNumber",children:"Número de Identificación *"}),e.jsx(d,{id:"identificationNumber",value:s.identificationNumber,onChange:a=>c("identificationNumber",a.target.value),placeholder:"1234567890",maxLength:10}),(n.identificationNumber||i.identificationNumber)&&e.jsx("p",{className:"text-sm text-red-500",children:n.identificationNumber||i.identificationNumber})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"fingerCode",children:"Código Dactilar *"}),e.jsx(d,{id:"fingerCode",value:s.fingerCode,onChange:a=>c("fingerCode",a.target.value.toUpperCase()),placeholder:"A1234B5678",maxLength:10}),(n.fingerCode||i.fingerCode)&&e.jsx("p",{className:"text-sm text-red-500",children:n.fingerCode||i.fingerCode})]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-3",children:[e.jsxs("div",{children:[e.jsx(l,{htmlFor:"applicantName",children:"Primer Nombre *"}),e.jsx(d,{id:"applicantName",value:s.applicantName,onChange:a=>c("applicantName",a.target.value),placeholder:"Juan"}),(n.applicantName||i.applicantName)&&e.jsx("p",{className:"text-sm text-red-500",children:n.applicantName||i.applicantName})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"applicantLastName",children:"Apellido Paterno *"}),e.jsx(d,{id:"applicantLastName",value:s.applicantLastName,onChange:a=>c("applicantLastName",a.target.value),placeholder:"Pérez"}),(n.applicantLastName||i.applicantLastName)&&e.jsx("p",{className:"text-sm text-red-500",children:n.applicantLastName||i.applicantLastName})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"applicantSecondLastName",children:"Apellido Materno"}),e.jsx(d,{id:"applicantSecondLastName",value:s.applicantSecondLastName,onChange:a=>c("applicantSecondLastName",a.target.value),placeholder:"González"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx(l,{htmlFor:"dateOfBirth",children:"Fecha de Nacimiento *"}),e.jsx(d,{id:"dateOfBirth",type:"date",value:s.dateOfBirth?new Date(s.dateOfBirth).toISOString().split("T")[0]:"",onChange:a=>c("dateOfBirth",a.target.value)}),(n.dateOfBirth||i.dateOfBirth)&&e.jsx("p",{className:"text-sm text-red-500",children:n.dateOfBirth||i.dateOfBirth}),r.current_age&&e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Edad: ",r.current_age," años",r.is_over_65&&e.jsx($,{variant:"outline",className:"ml-2 text-orange-600",children:"Mayor de 65"})]})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"emailAddress",children:"Correo Electrónico *"}),e.jsx(d,{id:"emailAddress",type:"email",value:s.emailAddress,onChange:a=>c("emailAddress",a.target.value),placeholder:"correo@ejemplo.com"}),(n.emailAddress||i.emailAddress)&&e.jsx("p",{className:"text-sm text-red-500",children:n.emailAddress||i.emailAddress})]})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"cellphoneNumber",children:"Número de Celular *"}),e.jsxs("div",{className:"flex",children:[e.jsx("span",{className:"inline-flex items-center px-3 text-sm text-gray-900 bg-gray-200 border border-r-0 border-gray-300 rounded-l-md",children:"+593"}),e.jsx(d,{id:"cellphoneNumber",type:"tel",value:s.cellphoneNumber.replace("+593",""),onChange:a=>{const t=a.target.value.replace(/\D/g,"");t.length<=9&&(t.length>=2&&t.substring(0,2)+""+t.substring(2),t.length>=5&&t.substring(0,2)+""+t.substring(2,5)+t.substring(5),c("cellphoneNumber","+593"+t))},placeholder:"96 831 9032",maxLength:11,className:"rounded-l-none"})]}),e.jsx("p",{className:"text-xs text-gray-500",children:"Formato: 96 831 9032 (9 dígitos)"}),(n.cellphoneNumber||i.cellphoneNumber)&&e.jsx("p",{className:"text-sm text-red-500",children:n.cellphoneNumber||i.cellphoneNumber})]})]})]}),o===2&&e.jsxs(g,{children:[e.jsxs(b,{children:[e.jsxs(y,{className:"flex items-center gap-2",children:[e.jsx(Ne,{className:"h-5 w-5"}),"Información de Ubicación"]}),e.jsx(C,{children:"Dirección y ubicación del solicitante"})]}),e.jsxs(N,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx(l,{htmlFor:"province",children:"Provincia *"}),e.jsxs(R,{value:s.province,onValueChange:a=>c("province",a),children:[e.jsx(S,{children:e.jsx(A,{placeholder:"Seleccionar provincia"})}),e.jsx(E,{children:L.map(a=>e.jsx(w,{value:a.name,children:a.name},a.id))})]}),(n.province||i.province)&&e.jsx("p",{className:"text-sm text-red-500",children:n.province||i.province})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"city",children:"Ciudad *"}),e.jsxs(R,{value:s.city,onValueChange:a=>c("city",a),disabled:!s.province||z,children:[e.jsx(S,{children:e.jsx(A,{placeholder:s.province?z?"Cargando ciudades...":"Seleccionar ciudad":"Seleccione una provincia primero"})}),e.jsx(E,{children:K.map(a=>e.jsx(w,{value:a.name,children:a.name},a.id))})]}),(n.city||i.city)&&e.jsx("p",{className:"text-sm text-red-500",children:n.city||i.city})]})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"address",children:"Dirección Completa *"}),e.jsx(pe,{id:"address",value:s.address,onChange:a=>c("address",a.target.value),placeholder:"Av. Principal 123 y Calle Secundaria, Edificio Torres del Norte, Piso 5",rows:3}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Mínimo 15 caracteres. Incluye referencias específicas."}),(n.address||i.address)&&e.jsx("p",{className:"text-sm text-red-500",children:n.address||i.address})]})]})]}),o===3&&e.jsxs(g,{children:[e.jsxs(b,{children:[e.jsxs(y,{className:"flex items-center gap-2",children:[e.jsx(fe,{className:"h-5 w-5"}),"Tipo de Certificación"]}),e.jsx(C,{children:"Información de aplicación y empresa (si aplica)"})]}),e.jsxs(N,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx(l,{htmlFor:"applicationType",children:"Tipo de Aplicación *"}),e.jsxs(R,{value:s.applicationType,onValueChange:a=>c("applicationType",a),children:[e.jsx(S,{children:e.jsx(A,{placeholder:"Seleccionar tipo"})}),e.jsx(E,{children:Object.entries(U).map(([a,t])=>e.jsx(w,{value:a,children:t},a))})]}),(n.applicationType||i.applicationType)&&e.jsx("p",{className:"text-sm text-red-500",children:n.applicationType||i.applicationType})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"period",children:"Período de Vigencia *"}),e.jsxs(R,{value:s.period,onValueChange:a=>c("period",a),children:[e.jsx(S,{children:e.jsx(A,{placeholder:"Seleccionar período"})}),e.jsx(E,{children:M.map(a=>e.jsxs(w,{value:a.period,children:[a.display_name," - $",a.price]},a.id))})]}),(n.period||i.period)&&e.jsx("p",{className:"text-sm text-red-500",children:n.period||i.period})]})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"referenceTransaction",children:"Referencia de Transacción *"}),e.jsx(d,{id:"referenceTransaction",value:s.referenceTransaction,onChange:a=>c("referenceTransaction",a.target.value),readOnly:!0,placeholder:"RT-001",maxLength:150}),(n.referenceTransaction||i.referenceTransaction)&&e.jsx("p",{className:"text-sm text-red-500",children:n.referenceTransaction||i.referenceTransaction})]}),D&&e.jsx(e.Fragment,{children:e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Información Empresarial"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(l,{htmlFor:"companyRuc",children:"RUC de la Empresa *"}),e.jsx(d,{id:"companyRuc",value:s.companyRuc,onChange:a=>c("companyRuc",a.target.value),placeholder:"1234567890001",maxLength:13}),(n.companyRuc||i.companyRuc)&&e.jsx("p",{className:"text-sm text-red-500",children:n.companyRuc||i.companyRuc})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"companySocialReason",children:"Razón Social *"}),e.jsx(d,{id:"companySocialReason",value:s.companySocialReason,onChange:a=>c("companySocialReason",a.target.value),placeholder:"EMPRESA EJEMPLO S.A.",maxLength:250}),(n.companySocialReason||i.companySocialReason)&&e.jsx("p",{className:"text-sm text-red-500",children:n.companySocialReason||i.companySocialReason})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx(l,{htmlFor:"positionCompany",children:"Cargo en la Empresa *"}),e.jsx(d,{id:"positionCompany",value:s.positionCompany,onChange:a=>c("positionCompany",a.target.value),placeholder:"Gerente General",maxLength:100}),(n.positionCompany||i.positionCompany)&&e.jsx("p",{className:"text-sm text-red-500",children:n.positionCompany||i.positionCompany})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"appointmentExpirationDate",children:"Vencimiento del Nombramiento *"}),e.jsx(d,{id:"appointmentExpirationDate",type:"date",value:s.appointmentExpirationDate,onChange:a=>c("appointmentExpirationDate",a.target.value)}),(n.appointmentExpirationDate||i.appointmentExpirationDate)&&e.jsx("p",{className:"text-sm text-red-500",children:n.appointmentExpirationDate||i.appointmentExpirationDate})]})]})]})]})}),s.applicationType==="NATURAL_PERSON"&&e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"RUC Personal (Opcional)"}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"companyRuc",children:"RUC Personal"}),e.jsx(d,{id:"companyRuc",value:s.companyRuc,onChange:a=>c("companyRuc",a.target.value),placeholder:"1234567890001",maxLength:13}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Solo si tienes RUC personal activo"})]})]})]})]}),o===4&&e.jsxs(g,{children:[e.jsxs(b,{children:[e.jsxs(y,{className:"flex items-center gap-2",children:[e.jsx(ve,{className:"h-5 w-5"}),"Documentos y Archivos"]}),e.jsx(C,{children:"Archivos actuales y reemplazos opcionales"})]}),e.jsxs(N,{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Documentos de Identidad"}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Cédula Frontal *"}),r.identificationFront&&e.jsxs("div",{className:"flex items-center gap-2 p-2 bg-green-50 rounded border",children:[e.jsx(p,{className:"h-4 w-4 text-green-600"}),e.jsx("span",{className:"text-sm text-green-700",children:"Archivo actual"}),e.jsx(m,{variant:"outline",size:"sm",asChild:!0,children:e.jsx("a",{href:`/storage/${r.identificationFront}`,target:"_blank",rel:"noopener noreferrer",children:e.jsx(h,{className:"h-3 w-3"})})})]}),e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-4 text-center",children:[e.jsx(u,{className:"h-8 w-8 mx-auto text-gray-400 mb-2"}),e.jsx(d,{type:"file",accept:"image/*",onChange:x("identificationFront"),className:"hidden",id:"identificationFront"}),e.jsx(l,{htmlFor:"identificationFront",className:"cursor-pointer text-sm text-blue-600 hover:text-blue-800",children:r.identificationFront?"Reemplazar archivo":"Seleccionar archivo"}),s.identificationFront&&e.jsx("p",{className:"text-xs text-green-600 mt-1",children:s.identificationFront.name})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Cédula Posterior *"}),r.identificationBack&&e.jsxs("div",{className:"flex items-center gap-2 p-2 bg-green-50 rounded border",children:[e.jsx(p,{className:"h-4 w-4 text-green-600"}),e.jsx("span",{className:"text-sm text-green-700",children:"Archivo actual"}),e.jsx(m,{variant:"outline",size:"sm",asChild:!0,children:e.jsx("a",{href:`/storage/${r.identificationBack}`,target:"_blank",rel:"noopener noreferrer",children:e.jsx(h,{className:"h-3 w-3"})})})]}),e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-4 text-center",children:[e.jsx(u,{className:"h-8 w-8 mx-auto text-gray-400 mb-2"}),e.jsx(d,{type:"file",accept:"image/*",onChange:x("identificationBack"),className:"hidden",id:"identificationBack"}),e.jsx(l,{htmlFor:"identificationBack",className:"cursor-pointer text-sm text-blue-600 hover:text-blue-800",children:r.identificationBack?"Reemplazar archivo":"Seleccionar archivo"}),s.identificationBack&&e.jsx("p",{className:"text-xs text-green-600 mt-1",children:s.identificationBack.name})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Selfie con Cédula *"}),r.identificationSelfie&&e.jsxs("div",{className:"flex items-center gap-2 p-2 bg-green-50 rounded border",children:[e.jsx(p,{className:"h-4 w-4 text-green-600"}),e.jsx("span",{className:"text-sm text-green-700",children:"Archivo actual"}),e.jsx(m,{variant:"outline",size:"sm",asChild:!0,children:e.jsx("a",{href:`/storage/${r.identificationSelfie}`,target:"_blank",rel:"noopener noreferrer",children:e.jsx(h,{className:"h-3 w-3"})})})]}),e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-4 text-center",children:[e.jsx(u,{className:"h-8 w-8 mx-auto text-gray-400 mb-2"}),e.jsx(d,{type:"file",accept:"image/*",onChange:x("identificationSelfie"),className:"hidden",id:"identificationSelfie"}),e.jsx(l,{htmlFor:"identificationSelfie",className:"cursor-pointer text-sm text-blue-600 hover:text-blue-800",children:r.identificationSelfie?"Reemplazar archivo":"Seleccionar archivo"}),s.identificationSelfie&&e.jsx("p",{className:"text-xs text-green-600 mt-1",children:s.identificationSelfie.name})]}),e.jsx("p",{className:"text-xs text-gray-500",children:"📸 Debe notarse claramente el rostro y sin accesorios extras (gafas, mascarilla, gorra, etc)."})]})]})]}),J&&e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Documentos Empresariales"}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"RUC de la Empresa *"}),r.pdfCompanyRuc&&e.jsxs("div",{className:"flex items-center gap-2 p-2 bg-green-50 rounded border",children:[e.jsx(p,{className:"h-4 w-4 text-green-600"}),e.jsx("span",{className:"text-sm text-green-700",children:"Archivo actual"}),e.jsx(m,{variant:"outline",size:"sm",asChild:!0,children:e.jsx("a",{href:`/storage/${r.pdfCompanyRuc}`,target:"_blank",rel:"noopener noreferrer",children:e.jsx(h,{className:"h-3 w-3"})})})]}),e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-4 text-center",children:[e.jsx(u,{className:"h-8 w-8 mx-auto text-gray-400 mb-2"}),e.jsx(d,{type:"file",accept:".pdf",onChange:x("pdfCompanyRuc"),className:"hidden",id:"pdfCompanyRuc"}),e.jsx(l,{htmlFor:"pdfCompanyRuc",className:"cursor-pointer text-sm text-blue-600 hover:text-blue-800",children:r.pdfCompanyRuc?"Reemplazar PDF":"Seleccionar PDF"}),s.pdfCompanyRuc&&e.jsx("p",{className:"text-xs text-green-600 mt-1",children:s.pdfCompanyRuc.name})]})]}),D&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Nombramiento *"}),r.pdfRepresentativeAppointment&&e.jsxs("div",{className:"flex items-center gap-2 p-2 bg-green-50 rounded border",children:[e.jsx(p,{className:"h-4 w-4 text-green-600"}),e.jsx("span",{className:"text-sm text-green-700",children:"Archivo actual"}),e.jsx(m,{variant:"outline",size:"sm",asChild:!0,children:e.jsx("a",{href:`/storage/${r.pdfRepresentativeAppointment}`,target:"_blank",rel:"noopener noreferrer",children:e.jsx(h,{className:"h-3 w-3"})})})]}),e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-4 text-center",children:[e.jsx(u,{className:"h-8 w-8 mx-auto text-gray-400 mb-2"}),e.jsx(d,{type:"file",accept:".pdf",onChange:x("pdfRepresentativeAppointment"),className:"hidden",id:"pdfRepresentativeAppointment"}),e.jsx(l,{htmlFor:"pdfRepresentativeAppointment",className:"cursor-pointer text-sm text-blue-600 hover:text-blue-800",children:r.pdfRepresentativeAppointment?"Reemplazar PDF":"Seleccionar PDF"}),s.pdfRepresentativeAppointment&&e.jsx("p",{className:"text-xs text-green-600 mt-1",children:s.pdfRepresentativeAppointment.name})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Aceptación Nombramiento *"}),r.pdfAppointmentAcceptance&&e.jsxs("div",{className:"flex items-center gap-2 p-2 bg-green-50 rounded border",children:[e.jsx(p,{className:"h-4 w-4 text-green-600"}),e.jsx("span",{className:"text-sm text-green-700",children:"Archivo actual"}),e.jsx(m,{variant:"outline",size:"sm",asChild:!0,children:e.jsx("a",{href:`/storage/${r.pdfAppointmentAcceptance}`,target:"_blank",rel:"noopener noreferrer",children:e.jsx(h,{className:"h-3 w-3"})})})]}),e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-4 text-center",children:[e.jsx(u,{className:"h-8 w-8 mx-auto text-gray-400 mb-2"}),e.jsx(d,{type:"file",accept:".pdf",onChange:x("pdfAppointmentAcceptance"),className:"hidden",id:"pdfAppointmentAcceptance"}),e.jsx(l,{htmlFor:"pdfAppointmentAcceptance",className:"cursor-pointer text-sm text-blue-600 hover:text-blue-800",children:r.pdfAppointmentAcceptance?"Reemplazar PDF":"Seleccionar PDF"}),s.pdfAppointmentAcceptance&&e.jsx("p",{className:"text-xs text-green-600 mt-1",children:s.pdfAppointmentAcceptance.name})]})]})]})]})]}),Z&&e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h3",{className:"text-lg font-medium mb-4 text-orange-600",children:"Video de Autorización Requerido"}),e.jsxs("div",{className:"bg-orange-50 border border-orange-200 rounded-md p-4 mb-4",children:[e.jsx("h4",{className:"font-medium text-orange-800 mb-2",children:"⚠️ Requisito Especial - Mayor de 65 años"}),e.jsx("p",{className:"text-sm text-orange-700 mb-3",children:"Debe grabar un video leyendo exactamente el siguiente texto:"}),e.jsx("div",{className:"bg-white border border-orange-300 rounded p-3 text-sm font-mono text-gray-800",children:ie()}),e.jsx("p",{className:"text-xs text-orange-600 mt-2",children:"📹 El video debe ser claro, con buena iluminación y audio."})]}),r.authorizationVideo&&e.jsxs("div",{className:"flex items-center gap-2 p-2 bg-green-50 rounded border mb-2",children:[e.jsx(p,{className:"h-4 w-4 text-green-600"}),e.jsx("span",{className:"text-sm text-green-700",children:"Video actual"}),e.jsx(m,{variant:"outline",size:"sm",asChild:!0,children:e.jsx("a",{href:`/storage/${r.authorizationVideo}`,target:"_blank",rel:"noopener noreferrer",children:e.jsx(h,{className:"h-3 w-3"})})})]}),e.jsxs("div",{className:"border-2 border-dashed border-orange-300 rounded-lg p-4 text-center",children:[e.jsx(u,{className:"h-8 w-8 mx-auto text-orange-400 mb-2"}),e.jsx(d,{type:"file",accept:"video/*",onChange:x("authorizationVideo"),className:"hidden",id:"authorizationVideo"}),e.jsx(l,{htmlFor:"authorizationVideo",className:"cursor-pointer text-sm text-orange-600 hover:text-orange-800",children:r.authorizationVideo?"Reemplazar video":"Seleccionar video"}),s.authorizationVideo&&e.jsx("p",{className:"text-xs text-green-600 mt-1",children:s.authorizationVideo.name})]})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(me,{checked:s.terms_accepted,onCheckedChange:a=>c("terms_accepted",a===!0)}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"terms_accepted",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Acepto los términos y condiciones *"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Al marcar esta casilla, confirmo que he leído y acepto todos los términos y condiciones del servicio."})]})]}),(n.terms_accepted||i.terms_accepted)&&e.jsx("p",{className:"text-sm text-red-500 mt-2",children:n.terms_accepted||i.terms_accepted})]})]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsxs(m,{type:"button",variant:"outline",onClick:se,disabled:o===1,children:[e.jsx(I,{className:"h-4 w-4 mr-2"}),"Anterior"]}),o<F?e.jsxs(m,{type:"button",onClick:ae,children:["Siguiente",e.jsx(Ce,{className:"h-4 w-4 ml-2"})]}):e.jsxs(m,{type:"button",onClick:te,disabled:k,className:"bg-green-600 hover:bg-green-700",children:[e.jsx(be,{className:"h-4 w-4 mr-2"}),k?"Guardando...":"Actualizar Certificación"]})]})]}),T&&e.jsx("div",{className:"fixed bottom-4 right-4 bg-white p-4 rounded-lg shadow-lg border",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-32 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${T.percentage}%`}})}),e.jsxs("span",{className:"text-sm text-gray-600",children:[T.percentage,"%"]})]})})]})]})}export{Ke as default};
