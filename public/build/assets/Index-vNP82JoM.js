import{r as p,j as e,L as y,$ as u,S as l}from"./app-DXl8iYFA.js";import{B as S}from"./badge-fZJujToP.js";import{c as w,B as t}from"./app-logo-icon-CCDeanD4.js";import{u as _,C as j}from"./use-breadcrumbs-DLBeVAXN.js";import{I as C}from"./input-AXSSoJzL.js";import{A as k,C as A}from"./app-layout-Bmd4AfJA.js";import{U as E}from"./user-plus-JJnnAJyr.js";import{S as L}from"./search-DyTrVFp5.js";import{S as U}from"./square-pen-wY8kXSkY.js";import{T as B}from"./trash-2-XLRBQMQv.js";import"./index-BsE4fqny.js";import"./index-BGF8R9_i.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],F=w("ChevronLeft",R);function V({users:a,roles:v,filters:i,flash:r}){const{adminBreadcrumbs:g}=_(),N=g.users.index(),[n,d]=p.useState(i.search||""),[c,o]=p.useState(i.role||""),m=()=>{l.get("/admin/users",{search:n||void 0,role:c||void 0},{preserveState:!0,replace:!0})},f=()=>{d(""),o(""),l.get("/admin/users",{},{preserveState:!0,replace:!0})},b=s=>{confirm(`¿Estás seguro de que quieres eliminar a ${s.name}?`)&&l.delete(`/admin/users/${s.id}`,{preserveScroll:!0})},x=s=>{l.get(s,{search:n||void 0,role:c||void 0},{preserveState:!0,preserveScroll:!0})};return e.jsxs(k,{breadcrumbs:N,children:[e.jsx(y,{title:"Gestión de Usuarios"}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-6 rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Gestión de Usuarios"}),e.jsx("p",{className:"text-muted-foreground",children:"Administra todos los usuarios del sistema"})]}),e.jsx(u,{href:"/admin/users/create",children:e.jsxs(t,{className:"flex items-center space-x-2",children:[e.jsx(E,{className:"h-4 w-4"}),e.jsx("span",{children:"Crear Usuario"})]})})]}),(r==null?void 0:r.success)&&e.jsx("div",{className:"bg-green-50 border border-green-200 text-green-800 px-4 py-3 rounded",children:r.success}),(r==null?void 0:r.error)&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-800 px-4 py-3 rounded",children:r.error}),e.jsx(j,{className:"p-4",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-end",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Buscar usuario"}),e.jsxs("div",{className:"relative",children:[e.jsx(L,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(C,{type:"text",placeholder:"Buscar por nombre o email...",value:n,onChange:s=>d(s.target.value),className:"pl-10",onKeyPress:s=>s.key==="Enter"&&m()})]})]}),e.jsxs("div",{className:"min-w-[200px]",children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Filtrar por rol"}),e.jsxs("select",{value:c,onChange:s=>o(s.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Todos los roles"}),v.map(s=>e.jsx("option",{value:s.name,children:s.display_name},s.id))]})]}),e.jsxs("div",{className:"min-w-[200px]",children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Ordenar por"}),e.jsxs("select",{value:i.sort||"oldest",onChange:s=>{l.get("/admin/users",{...i,sort:s.target.value},{preserveState:!0,replace:!0})},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"oldest",children:"Más antiguos primero"}),e.jsx("option",{value:"newest",children:"Más recientes primero"}),e.jsx("option",{value:"name_asc",children:"Nombre A-Z"}),e.jsx("option",{value:"name_desc",children:"Nombre Z-A"}),e.jsx("option",{value:"email_asc",children:"Email A-Z"}),e.jsx("option",{value:"email_desc",children:"Email Z-A"})]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(t,{onClick:m,children:"Filtrar"}),e.jsx(t,{variant:"outline",onClick:f,children:"Limpiar"})]})]})}),e.jsxs(j,{children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"border-b",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left p-4 font-medium",children:"Usuario"}),e.jsx("th",{className:"text-left p-4 font-medium",children:"Email"}),e.jsx("th",{className:"text-left p-4 font-medium",children:"Roles"}),e.jsx("th",{className:"text-left p-4 font-medium",children:"Fecha Registro"}),e.jsx("th",{className:"text-right p-4 font-medium",children:"Acciones"})]})}),e.jsx("tbody",{children:a.data.length>0?a.data.map(s=>e.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center text-white text-sm font-medium",children:s.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:s.name}),e.jsxs("div",{className:"text-sm text-gray-500",children:["ID: ",s.id]})]})]})}),e.jsxs("td",{className:"p-4",children:[e.jsx("div",{className:"text-sm",children:s.email}),s.email_verified_at?e.jsx("div",{className:"text-xs text-green-600",children:"✓ Verificado"}):e.jsx("div",{className:"text-xs text-red-600",children:"✗ No verificado"})]}),e.jsx("td",{className:"p-4",children:e.jsx("div",{className:"flex flex-wrap gap-1",children:s.roles&&s.roles.length>0?s.roles.map(h=>e.jsx(S,{variant:"secondary",children:h.display_name},h.id)):e.jsx("span",{className:"text-gray-400 text-sm",children:"Sin roles"})})}),e.jsxs("td",{className:"p-4",children:[e.jsx("div",{className:"text-sm",children:new Date(s.created_at).toLocaleDateString("es-ES")}),e.jsx("div",{className:"text-xs text-gray-500",children:new Date(s.created_at).toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit"})})]}),e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[e.jsx(u,{href:`/admin/users/${s.id}/edit`,children:e.jsx(t,{variant:"outline",size:"sm",children:e.jsx(U,{className:"h-4 w-4"})})}),e.jsx(t,{variant:"outline",size:"sm",onClick:()=>b(s),className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:e.jsx(B,{className:"h-4 w-4"})})]})})]},s.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"p-8 text-center text-gray-500",children:"No se encontraron usuarios"})})})]})}),a.data.length>0&&e.jsxs("div",{className:"flex items-center justify-between p-4 border-t",children:[e.jsxs("div",{className:"text-sm text-gray-500",children:["Mostrando ",a.from," a ",a.to," de ",a.total," usuarios"]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[a.current_page>1&&e.jsxs(t,{variant:"outline",size:"sm",onClick:()=>x(a.prev_page_url),children:[e.jsx(F,{className:"h-4 w-4"}),"Anterior"]}),e.jsxs("span",{className:"text-sm",children:["Página ",a.current_page," de ",a.last_page]}),a.current_page<a.last_page&&e.jsxs(t,{variant:"outline",size:"sm",onClick:()=>x(a.next_page_url),children:["Siguiente",e.jsx(A,{className:"h-4 w-4"})]})]})]})]})]})]})}export{V as default};
